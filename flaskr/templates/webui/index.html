{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}QR Code Generator{% endblock %}</h1>
{% endblock %}

{% block content %}
    <h2>Generate QR Code</h2>
    <form method="POST" action="{{ url_for('webui.index') }}">
        <label for="data">Data:</label>
        <input type="text" id="data" name="data" required pattern="[a-zA-Z0-9]+">

        <label for="version">QR Version:</label>
        <select name="version" id="version">
            <option value="1" selected>Version 1 (up to 19 chars)</option>
            <option value="2">Version 2 (up to 34 chars)</option>
        </select>

        <label for="fg">Foreground (QR dot) colour:</label>
        <input type="color" id="fg" name="fg" value="#000000">

        <label for="bg">Background colour:</label>
        <input type="color" id="bg" name="bg" value="#ffffff">

        <button type="submit">Generate</button>
    </form>
    
    {% if qr_code_url %}
        <h3>Generated QR Code:</h3>
        <img src="{{ qr_code_url }}" alt="Final QR Code">

        <h3>Step-by-Step Construction:</h3>

        <div>
            <p><strong>Stage 1: Reserved Matrix</strong></p>
            <img src="{{ url_for('static', filename='stage1_reserved.png') }}" alt="Reserved Matrix">

            <p><strong>Stage 2: With Data + Patterns</strong></p>
            <img src="{{ url_for('static', filename='stage2_patterns_data.png') }}" alt="Patterns and Data">

            <p><strong>Stage 3: After Masking</strong></p>
            <img src="{{ url_for('static', filename='stage3_masked.png') }}" alt="Masked Matrix">

            <p><strong>Stage 4: Final with Format Info</strong></p>
            <img src="{{ url_for('static', filename='stage4_final.png') }}" alt="Final Matrix with Format">
        </div>
    {% endif %}

{% endblock %}